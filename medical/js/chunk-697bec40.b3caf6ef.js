(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-697bec40"],{"167b":function(e,s,t){e.exports=t.p+"img/login_register_back.e208b7cb.png"},5899:function(e,s){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,s,t){var a=t("1d80"),i=t("5899"),r="["+i+"]",n=RegExp("^"+r+r+"*"),o=RegExp(r+r+"*$"),l=function(e){return function(s){var t=String(a(s));return 1&e&&(t=t.replace(n,"")),2&e&&(t=t.replace(o,"")),t}};e.exports={start:l(1),end:l(2),trim:l(3)}},"5ecc":function(e,s,t){"use strict";var a=t("795f"),i=t.n(a);i.a},7156:function(e,s,t){var a=t("861d"),i=t("d2bb");e.exports=function(e,s,t){var r,n;return i&&"function"==typeof(r=s.constructor)&&r!==t&&a(n=r.prototype)&&n!==t.prototype&&i(e,n),e}},"795f":function(e,s,t){},"8cb6":function(e,s,t){e.exports=t.p+"img/fil.d0289dc0.png"},"9ab4":function(e,s,t){"use strict";t.d(s,"a",(function(){return a}));function a(e,s,t,a){var i,r=arguments.length,n=r<3?s:null===a?a=Object.getOwnPropertyDescriptor(s,t):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(e,s,t,a);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(n=(r<3?i(n):r>3?i(s,t,n):i(s,t))||n);return r>3&&n&&Object.defineProperty(s,t,n),n}},a6a3:function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"logInToRegister"},[t("div",{staticClass:"logInToRegister-cont"},[e._m(0),t("div",{staticClass:"logInToRegister-cont-right"},[e.register_state?t("div",{staticClass:"register-cont"},[t("div",{staticClass:"cont-nav"},[e._v("注册")]),t("div",{staticClass:"cont-input"},[t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.register_mess.username,expression:"register_mess.username"}],attrs:{type:"text",placeholder:"用户名"},domProps:{value:e.register_mess.username},on:{blur:function(s){return e.isRepeatUserName()},input:function(s){s.target.composing||e.$set(e.register_mess,"username",s.target.value)}}}),e.repeatUserName?t("span",{staticClass:"font-red"},[e._v("该用户名已存在, 请重新输入")]):e._e()]),t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.register_mess.email,expression:"register_mess.email"}],attrs:{type:"text",placeholder:"电子邮箱地址"},domProps:{value:e.register_mess.email},on:{blur:function(s){return e.isRepeatEmail()},input:function(s){s.target.composing||e.$set(e.register_mess,"email",s.target.value)}}}),e.repeatEmail?t("span",{staticClass:"font-red"},[e._v("该邮箱已被注册, 请重新输入")]):e._e()]),t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.register_mess.password,expression:"register_mess.password"}],attrs:{type:"password",placeholder:"账号密码"},domProps:{value:e.register_mess.password},on:{input:function(s){s.target.composing||e.$set(e.register_mess,"password",s.target.value)}}})])]),t("div",{staticClass:"cont-mess"},[t("span"),t("a",{attrs:{href:"#"},on:{click:function(s){return e.goLigin()}}},[e._v("已有账号去登录")]),t("span")]),t("div",{staticClass:"cont-but",on:{click:function(s){return e.createAcc()}}},[e._v("创建账号")])]):e._e(),e.login_state?t("div",{staticClass:"login-cont"},[t("div",{staticClass:"cont-nav cont-bottom"},[e._v("登录")]),t("div",{staticClass:"cont-input"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.login_mess.username,expression:"login_mess.username"}],attrs:{type:"text",placeholder:"用户名/电子邮箱"},domProps:{value:e.login_mess.username},on:{input:function(s){s.target.composing||e.$set(e.login_mess,"username",s.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.login_mess.password,expression:"login_mess.password"}],attrs:{type:"password",placeholder:"账号密码"},domProps:{value:e.login_mess.password},on:{input:function(s){s.target.composing||e.$set(e.login_mess,"password",s.target.value)}}})]),t("div",{staticClass:"cont-mess text"},[t("a",{attrs:{href:"#"},on:{click:function(s){return e.goRegister()}}},[e._v("注册")]),t("a",{attrs:{href:"#"},on:{click:function(s){return e.forgotPass()}}},[e._v("忘记密码？")])]),t("div",{staticClass:"cont-but",on:{click:function(s){return e.login()}}},[e._v("登录")])]):e._e(),e.person_state?t("div",{staticClass:"person-cont"},[t("div",{staticClass:"cont-nav"},[e._v("个人资料")]),t("div",{staticClass:"cont-input"},[t("el-select",{attrs:{placeholder:"单位/机构"},model:{value:e.register_mess.industry,callback:function(s){e.$set(e.register_mess,"industry",s)},expression:"register_mess.industry"}},[t("el-option",{attrs:{label:"企业",value:"4"}}),t("el-option",{attrs:{label:"事业单位",value:"3"}}),t("el-option",{attrs:{label:"科研机构",value:"2"}}),t("el-option",{attrs:{label:"高等学校",value:"1"}}),t("el-option",{attrs:{label:"其他",value:"0"}})],1),t("el-select",{attrs:{placeholder:"专业领域"},model:{value:e.register_mess.professionalField,callback:function(s){e.$set(e.register_mess,"professionalField",s)},expression:"register_mess.professionalField"}},[t("el-option",{attrs:{label:"工业技术",value:"8"}}),t("el-option",{attrs:{label:"农业科学",value:"7"}}),t("el-option",{attrs:{label:"医药卫生",value:"6"}}),t("el-option",{attrs:{label:"基础科学",value:"5"}}),t("el-option",{attrs:{label:"科教文艺",value:"4"}}),t("el-option",{attrs:{label:"经济财政",value:"3"}}),t("el-option",{attrs:{label:"社会科学",value:"2"}}),t("el-option",{attrs:{label:"哲学政法",value:"1"}}),t("el-option",{attrs:{label:"其他",value:"0"}})],1),t("el-select",{attrs:{placeholder:"职位"},model:{value:e.register_mess.position,callback:function(s){e.$set(e.register_mess,"position",s)},expression:"register_mess.position"}},[t("el-option",{attrs:{label:"企业员工",value:"6"}}),t("el-option",{attrs:{label:"学生",value:"5"}}),t("el-option",{attrs:{label:"研究助理",value:"4"}}),t("el-option",{attrs:{label:"研究员",value:"3"}}),t("el-option",{attrs:{label:"课题组负责人",value:"2"}}),t("el-option",{attrs:{label:"学术带头人",value:"1"}}),t("el-option",{attrs:{label:"其他",value:"0"}})],1),t("input",{directives:[{name:"model",rawName:"v-model",value:e.register_mess.phoneNumber,expression:"register_mess.phoneNumber"}],attrs:{type:"text",placeholder:"手机号（选填）"},domProps:{value:e.register_mess.phoneNumber},on:{input:function(s){s.target.composing||e.$set(e.register_mess,"phoneNumber",s.target.value)}}})],1),t("div",{staticClass:"rules"},[t("el-checkbox",{model:{value:e.rulesState,callback:function(s){e.rulesState=s},expression:"rulesState"}},[e._v("我已阅读并同意接受"),t("a",{staticStyle:{color:"#2C73FF"},attrs:{href:"../#/userAgre",target:"_blank"}},[e._v("用户协议")]),e._v("及 "),t("a",{staticStyle:{color:"#2C73FF"},attrs:{href:"../#/privacyPolicy",target:"_blank"}},[e._v("隐私政策")])])],1),t("div",{staticClass:"cont-mess change-mess"},[t("span"),t("span",{on:{click:function(s){return e.goRegister()}}},[e._v("上一步")]),t("span")]),t("div",{staticClass:"cont-but",on:{click:function(s){return e.register()}}},[e._v("注册")])]):e._e(),e.reset_state?t("div",{staticClass:"person-cont"},[t("div",{staticClass:"cont-nav"},[e._v("重置密码")]),t("div",{staticClass:"cont-input",staticStyle:{"margin-bottom":"105px","margin-top":"50px"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.back_mess.email,expression:"back_mess.email"}],attrs:{type:"text",placeholder:"电子邮箱地址"},domProps:{value:e.back_mess.email},on:{input:function(s){s.target.composing||e.$set(e.back_mess,"email",s.target.value)}}})]),t("div",{staticClass:"cont-mess change-mess",staticStyle:{"margin-bottom":"125px"}},[t("span"),t("span",{on:{click:function(s){return e.goLigin()}}},[e._v("返回登录")]),t("span")]),t("div",{staticClass:"cont-but",on:{click:function(s){return e.sendEmail()}}},[e._v("发送重置邮箱")])]):e._e(),e.reset_code_state?t("div",{staticClass:"person-cont"},[t("div",{staticClass:"cont-nav"},[e._v("重置密码")]),t("div",{staticClass:"cont-input",staticStyle:{"margin-bottom":"105px","margin-top":"50px"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.back_mess.code,expression:"back_mess.code"}],attrs:{type:"text",placeholder:"邮箱验证码"},domProps:{value:e.back_mess.code},on:{input:function(s){s.target.composing||e.$set(e.back_mess,"code",s.target.value)}}})]),t("div",{staticClass:"cont-mess change-mess",staticStyle:{"margin-bottom":"125px"}},[t("span"),t("span",{on:{click:function(s){return e.previousStep()}}},[e._v("上一步")]),t("span")]),t("div",{staticClass:"cont-but",on:{click:function(s){return e.goChangePass()}}},[e._v("确定")])]):e._e(),e.reset_pass_state?t("div",{staticClass:"person-cont"},[t("div",{staticClass:"cont-nav"},[e._v("重置密码")]),t("div",{staticClass:"cont-input",staticStyle:{"margin-bottom":"105px","margin-top":"50px"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.back_mess.oldPassword,expression:"back_mess.oldPassword"}],attrs:{type:"password",placeholder:"修改密码"},domProps:{value:e.back_mess.oldPassword},on:{input:function(s){s.target.composing||e.$set(e.back_mess,"oldPassword",s.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.back_mess.password,expression:"back_mess.password"}],attrs:{type:"password",placeholder:"确认密码"},domProps:{value:e.back_mess.password},on:{input:function(s){s.target.composing||e.$set(e.back_mess,"password",s.target.value)}}})]),t("div",{staticClass:"cont-mess change-mess"},[t("span"),t("span",{on:{click:function(s){return e.goRegisterPass()}}},[e._v("上一步")]),t("span")]),t("div",{staticClass:"cont-but",on:{click:function(s){return e.changePass()}}},[e._v("确定")])]):e._e()])]),t("filBottom",{attrs:{isLogin:!0}})],1)},i=[function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("div",{staticClass:"logInToRegister-cont-left"},[a("img",{attrs:{src:t("167b"),alt:""}})])}],r=(t("d81d"),t("a9e3"),t("ac1f"),t("5319"),t("d4ec")),n=t("bee2"),o=t("262e"),l=t("2caf"),c=t("9ab4"),u=t("60a3"),m=t("ee7e"),p=t("0613"),g=function(e){Object(o["a"])(t,e);var s=Object(l["a"])(t);function t(){var e;return Object(r["a"])(this,t),e=s.apply(this,arguments),e.register_state=!1,e.login_state=!0,e.person_state=!1,e.reset_state=!1,e.reset_code_state=!1,e.reset_pass_state=!1,e.register_mess={username:"",email:"",password:"",industry:"",professionalField:"",position:"",phoneNumber:""},e.login_mess={username:"",password:""},e.back_mess={email:"",password:"",code:"",oldPassword:""},e.repeatUserName=!1,e.repeatEmail=!1,e.rulesState=!1,e}return Object(n["a"])(t,[{key:"created",value:function(){this.localCacheMess()}},{key:"checkSignInfo",value:function(e){return"number"!=typeof e&&""==e||null==e}},{key:"register",value:function(){var e=this;if(this.rulesState){var s=this;this.checkSignInfo(this.register_mess.industry)||this.checkSignInfo(this.register_mess.professionalField)||this.checkSignInfo(this.register_mess.position)?this.$message({message:"请选择单位/机构、专业领域、职位",type:"warning"}):this.$axios.post("/main/h5/sign/sign",{username:this.register_mess.username,email:this.register_mess.email,password:this.register_mess.password,industry:0==Number(this.register_mess.industry)?0:Number(this.register_mess.industry),professionalField:0==Number(this.register_mess.professionalField)?"":Number(this.register_mess.professionalField),position:0==Number(this.register_mess.position)?0:Number(this.register_mess.position),phoneNumber:this.register_mess.phoneNumber}).then((function(t){console.log(t),"00000000"==t.data.code?(s.$message("注册成功"),s.register_mess={username:"",email:"",password:"",industry:"",professionalField:"",position:"",phoneNumber:""},s.accordingHide("login_state")):e.$message.error(t.data.message)}))}else this.$message({message:"请勾选“我已阅读并同意接受用户协议及隐私政策”",type:"warning"})}},{key:"createAcc",value:function(){if(this.repeatUserName)this.$message({message:"该用户名已存在, 请重新输入",type:"warning"});else if(this.repeatEmail)this.$message({message:"该邮箱已被注册, 请重新输入",type:"warning"});else{var e=this.register_mess.username,s=this.register_mess.email,t=this.register_mess.password,a=/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/,i=/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,18}$/;if(0==e.replace().length||0==s.replace().length||0==t.replace().length)this.$message({message:"用户名.邮箱.密码不得为空",type:"warning"});else{if(e.replace().length<4||e.replace().length>15)return void this.$message({message:"请输入4到15位合法字符",type:"warning"});if(!a.test(s))return void this.$message({message:"请输入合法邮箱地址",type:"warning"});if(t.replace().length<10||t.replace().length>20||!i.test(t))return void this.$message({message:"密码格式错误：请输入10-20位英文和数字组合",type:"warning"});this.accordingHide("person_state")}}}},{key:"goLigin",value:function(){this.accordingHide("login_state")}},{key:"goRegister",value:function(){this.accordingHide("register_state")}},{key:"goRegisterPass",value:function(){this.accordingHide("reset_code_state")}},{key:"login",value:function(){var e={username:this.login_mess.username,password:this.login_mess.password},s=this;this.$axios.post("/main/h5/sign/login",e).then((function(e){if(console.log(e),"00000000"==e.data.code){var t=e.data.data.token;localStorage.setItem("token",t),p["a"].commit("setToken",t),s.$message("登录成功"),localStorage.setItem("username",s.login_mess.username),localStorage.setItem("password",s.login_mess.password),s.$router.push({name:"HomeCont",params:{id:"0"}})}else s.$message.error(e.data.message)}))}},{key:"localCacheMess",value:function(){this.login_mess.username=localStorage.getItem("username"),this.login_mess.password=localStorage.getItem("password")}},{key:"isRepeatUserName",value:function(){var e=this;this.$axios.get("/main/h5/sign/checkUsername?username="+this.register_mess.username).then((function(s){console.log(s),"00000000"==s.data.code?s.data.data?e.repeatUserName=!0:e.repeatUserName=!1:console.log("用户名效验失败")}))}},{key:"isRepeatEmail",value:function(){var e=this;this.$axios.get("/main/h5/sign/checkEmail?email="+this.register_mess.email).then((function(s){console.log(s),"00000000"==s.data.code?s.data.data?e.repeatEmail=!0:e.repeatEmail=!1:console.log("邮箱效验失败")}))}},{key:"forgotPass",value:function(){this.accordingHide("reset_state")}},{key:"sendEmail",value:function(){var e=this,s=(this.back_mess.email,/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/),t=this.back_mess.email;if(s.test(t)){var a=this;this.$axios.get("/main/h5/sign/sendEmail?email="+t).then((function(s){console.log(s),"00000000"==s.data.code?(a.$message("发送成功"),setTimeout((function(){e.accordingHide("reset_code_state")}),2e3)):a.$message.error(s.data.message)}))}else this.$message({message:"请输入合法邮箱地址",type:"warning"})}},{key:"previousStep",value:function(){this.accordingHide("reset_state")}},{key:"goChangePass",value:function(){this.accordingHide("reset_pass_state")}},{key:"changePass",value:function(){if(this.back_mess.oldPassword!=this.back_mess.password)this.$message.error("两次密码输入不一致"),this.back_mess.oldPassword="",this.back_mess.password="";else{var e=/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,18}$/;if(this.back_mess.password.replace().length<10||this.back_mess.password.replace().length>20||!e.test(this.back_mess.password))this.$message({message:"密码格式错误：请输入10-20位英文和数字组合",type:"warning"});else{var s={email:this.back_mess.email,code:this.back_mess.code,password:this.back_mess.password},t=this;this.$axios.post("/main/h5/sign/retrievePassword",s).then((function(e){console.log(e),"00000000"==e.data.code?(t.$message("修改密码成功"),setTimeout((function(){t.accordingHide("login_state")}),2e3)):t.$message.error(e.data.message)}))}}}},{key:"accordingHide",value:function(e){var s=this,t=["register_state","login_state","person_state","reset_state","reset_code_state","reset_pass_state"],a=!1;t.map((function(t){t==e?a=!0:s[t]=!1})),a&&(this[e]=!0)}}]),t}(u["c"]);g=Object(c["a"])([Object(u["a"])({components:{filBottom:m["a"]}})],g);var d=g,v=d,_=(t("5ecc"),t("2877")),f=Object(_["a"])(v,a,i,!1,null,null,null);s["default"]=f.exports},a9e3:function(e,s,t){"use strict";var a=t("83ab"),i=t("da84"),r=t("94ca"),n=t("6eeb"),o=t("5135"),l=t("c6b6"),c=t("7156"),u=t("c04e"),m=t("d039"),p=t("7c73"),g=t("241c").f,d=t("06cf").f,v=t("9bf2").f,_=t("58a8").trim,f="Number",h=i[f],b=h.prototype,w=l(p(b))==f,k=function(e){var s,t,a,i,r,n,o,l,c=u(e,!1);if("string"==typeof c&&c.length>2)if(c=_(c),s=c.charCodeAt(0),43===s||45===s){if(t=c.charCodeAt(2),88===t||120===t)return NaN}else if(48===s){switch(c.charCodeAt(1)){case 66:case 98:a=2,i=49;break;case 79:case 111:a=8,i=55;break;default:return+c}for(r=c.slice(2),n=r.length,o=0;o<n;o++)if(l=r.charCodeAt(o),l<48||l>i)return NaN;return parseInt(r,a)}return+c};if(r(f,!h(" 0o1")||!h("0b1")||h("+0x1"))){for(var y,C=function(e){var s=arguments.length<1?0:e,t=this;return t instanceof C&&(w?m((function(){b.valueOf.call(t)})):l(t)!=f)?c(new h(k(s)),t,C):k(s)},N=a?g(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;N.length>x;x++)o(h,y=N[x])&&!o(C,y)&&v(C,y,d(h,y));C.prototype=b,b.constructor=C,n(i,f,C)}},bbf5:function(e,s,t){},bee2:function(e,s,t){"use strict";function a(e,s){for(var t=0;t<s.length;t++){var a=s[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function i(e,s,t){return s&&a(e.prototype,s),t&&a(e,t),e}t.d(s,"a",(function(){return i}))},d8ed:function(e,s,t){"use strict";var a=t("bbf5"),i=t.n(a);i.a},ee7e:function(e,s,t){"use strict";var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"filBottom",style:e.isLogin?"width: 100%":"width: calc(100% - 190px)"},[e._m(0)])},i=[function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("div",[a("p",[e._v("@2020 xueshu.work版权所有 粤ICP备2020106461号-1")]),a("p",[a("img",{attrs:{src:t("8cb6"),alt:""}}),e._v(" 粤公网安备 44060802000236号")])])}],r={props:{isLogin:Boolean},name:"filBottom",data:function(){return{}}},n=r,o=(t("d8ed"),t("2877")),l=Object(o["a"])(n,a,i,!1,null,"e3dbd652",null);s["a"]=l.exports}}]);
