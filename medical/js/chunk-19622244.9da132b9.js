(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-19622244"],{"466d":function(e,t,s){"use strict";var a=s("d784"),i=s("825a"),l=s("50c4"),r=s("1d80"),n=s("8aa5"),o=s("14c3");a("match",1,(function(e,t,s){return[function(t){var s=r(this),a=void 0==t?void 0:t[e];return void 0!==a?a.call(t,s):new RegExp(t)[e](String(s))},function(e){var a=s(t,e,this);if(a.done)return a.value;var r=i(e),c=String(this);if(!r.global)return o(r,c);var u=r.unicode;r.lastIndex=0;var v,d=[],g=0;while(null!==(v=o(r,c))){var h=String(v[0]);d[g]=h,""===h&&(r.lastIndex=n(c,l(r.lastIndex),u)),g++}return 0===g?null:d}]}))},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,s){var a=s("1d80"),i=s("5899"),l="["+i+"]",r=RegExp("^"+l+l+"*"),n=RegExp(l+l+"*$"),o=function(e){return function(t){var s=String(a(t));return 1&e&&(s=s.replace(r,"")),2&e&&(s=s.replace(n,"")),s}};e.exports={start:o(1),end:o(2),trim:o(3)}},7156:function(e,t,s){var a=s("861d"),i=s("d2bb");e.exports=function(e,t,s){var l,r;return i&&"function"==typeof(l=t.constructor)&&l!==s&&a(r=l.prototype)&&r!==s.prototype&&i(e,r),e}},"8d42":function(e,t,s){"use strict";var a=s("a612"),i=s.n(a);i.a},"9ab4":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));function a(e,t,s,a){var i,l=arguments.length,r=l<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,s):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,s,a);else for(var n=e.length-1;n>=0;n--)(i=e[n])&&(r=(l<3?i(r):l>3?i(t,s,r):i(t,s))||r);return l>3&&r&&Object.defineProperty(t,s,r),r}},a612:function(e,t,s){},a9e3:function(e,t,s){"use strict";var a=s("83ab"),i=s("da84"),l=s("94ca"),r=s("6eeb"),n=s("5135"),o=s("c6b6"),c=s("7156"),u=s("c04e"),v=s("d039"),d=s("7c73"),g=s("241c").f,h=s("06cf").f,f=s("9bf2").f,m=s("58a8").trim,p="Number",_=i[p],b=_.prototype,y=o(d(b))==p,k=function(e){var t,s,a,i,l,r,n,o,c=u(e,!1);if("string"==typeof c&&c.length>2)if(c=m(c),t=c.charCodeAt(0),43===t||45===t){if(s=c.charCodeAt(2),88===s||120===s)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:a=2,i=49;break;case 79:case 111:a=8,i=55;break;default:return+c}for(l=c.slice(2),r=l.length,n=0;n<r;n++)if(o=l.charCodeAt(n),o<48||o>i)return NaN;return parseInt(l,a)}return+c};if(l(p,!_(" 0o1")||!_("0b1")||_("+0x1"))){for(var w,C=function(e){var t=arguments.length<1?0:e,s=this;return s instanceof C&&(y?v((function(){b.valueOf.call(s)})):o(s)!=p)?c(new _(k(t)),s,C):k(t)},S=a?g(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),P=0;S.length>P;P++)n(_,w=S[P])&&!n(C,w)&&f(C,w,h(_,w));C.prototype=b,b.constructor=C,r(i,p,C)}},b0c0:function(e,t,s){var a=s("83ab"),i=s("9bf2").f,l=Function.prototype,r=l.toString,n=/^\s*function ([^ (]*)/,o="name";a&&!(o in l)&&i(l,o,{configurable:!0,get:function(){try{return r.call(this).match(n)[1]}catch(e){return""}}})},bee2:function(e,t,s){"use strict";function a(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function i(e,t,s){return t&&a(e.prototype,t),s&&a(e,s),e}s.d(t,"a",(function(){return i}))},e89d:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"personalSettings"},[s("div",{staticClass:"personalSettings-cont"},[s("div",{staticClass:"personalSettings-cont-top"},[e.levelState_1?e._e():s("div",{staticClass:"bread_crumbs"},e._l(e.bread_crumbs,(function(t,a){return s("span",{key:t},[s("span",{staticStyle:{cursor:"pointer","font-size":"22px"},on:{click:function(t){return e.indexShow(a)}}},[e._v(e._s(t))]),a<e.bread_crumbs.length-1?s("span",[e._v(" > ")]):e._e()])})),0),e.levelState_1?s("div",{staticClass:"setting-level-1"},[s("div",{staticClass:"setting-level-1-list",on:{click:function(t){return e.instructions("instructions")}}},[s("div",{staticClass:"level-1-list-left"},[e._v("用户须知")]),s("div",{staticClass:"level-1-list-right"},[e._v(">")])]),s("div",{staticClass:"setting-level-1-list",on:{click:function(t){return e.instructions("admin")}}},[s("div",{staticClass:"level-1-list-left"},[e._v("账号管理")]),s("div",{staticClass:"level-1-list-right"},[e._v(">")])]),s("div",{staticClass:"setting-level-1-list"},[s("div",{staticClass:"level-1-list-left",on:{click:function(t){return e.clickLogOut()}}},[e._v("退出登录")]),s("div",{staticClass:"level-1-list-right"})])]):e._e(),"instructions"==e.secondary_type?s("div",[e.levelState_2?s("div",{staticClass:"setting-level-2"},[e._m(0),e._m(1),e._m(2)]):e._e()]):e._e(),"admin"==e.secondary_type?s("div",[e.levelState_2?s("div",{staticClass:"setting-level-2"},[s("div",{staticClass:"setting-level-2-list",on:{click:function(t){return e.lowerClick("headImg")}}},[s("div",{staticClass:"level-2-list-left"},[e._v("用户头像")]),s("div",{staticClass:"level-2-list-right"},[e._v(">")])]),s("div",{staticClass:"setting-level-2-list",on:{click:function(t){return e.lowerClick("changName")}}},[s("div",{staticClass:"level-2-list-left"},[e._v("用户名修改")]),s("div",{staticClass:"level-2-list-right"},[e._v(">")])]),s("div",{staticClass:"setting-level-2-list",on:{click:function(t){return e.lowerClick("changPass")}}},[s("div",{staticClass:"level-2-list-left"},[e._v("密码修改")]),s("div",{staticClass:"level-2-list-right"},[e._v(">")])]),s("div",{staticClass:"setting-level-2-list",on:{click:function(t){return e.lowerClick("changUnitNatures")}}},[s("div",{staticClass:"level-2-list-left"},[e._v("单位性质")]),s("div",{staticClass:"level-2-list-right"},[e._v(">")])])]):e._e()]):e._e(),e.levelState_3?s("div",{staticClass:"setting-level-3"},[e.tertiary_nodule_state.changName?s("div",{staticClass:"headImg"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.changUserrMess.changName,expression:"changUserrMess.changName"}],attrs:{type:"text"},domProps:{value:e.changUserrMess.changName},on:{input:function(t){t.target.composing||e.$set(e.changUserrMess,"changName",t.target.value)}}}),s("el-button",{attrs:{type:"primary",disabled:e.changUserrMess.changName==e.$store.state.userMess.username},on:{click:function(t){return e.saveUserName()}}},[e._v("保存")])],1):e._e(),e.tertiary_nodule_state.headImg?s("div",{staticClass:"headImg"},[s("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/main/h5/resource/uploadImg",name:"imgFile","on-success":e.handImgSuccess,data:e.imgObj,"show-file-list":!1,"before-upload":e.beforeAvatarUpload}},[e.imgPath?s("img",{staticClass:"avatar",attrs:{src:e.imgPath}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveHeadImg()}}},[e._v("更换头像")]),e._m(3)],1):e._e(),e.tertiary_nodule_state.changPass?s("div",{staticClass:"messStyle marginPass"},[s("div",[s("label",{attrs:{for:""}},[e._v("原先密码")]),s("el-input",{attrs:{type:"password"},model:{value:e.changUserrMess.oldPassword,callback:function(t){e.$set(e.changUserrMess,"oldPassword",t)},expression:"changUserrMess.oldPassword"}})],1),s("div",[s("label",{attrs:{for:""}},[e._v("修改密码")]),s("el-input",{attrs:{type:"password"},model:{value:e.changUserrMess.newPassword,callback:function(t){e.$set(e.changUserrMess,"newPassword",t)},expression:"changUserrMess.newPassword"}})],1),s("div",[s("label",{attrs:{for:""}},[e._v("确认密码")]),s("el-input",{attrs:{type:"password"},model:{value:e.changUserrMess.newSecondPassword,callback:function(t){e.$set(e.changUserrMess,"newSecondPassword",t)},expression:"changUserrMess.newSecondPassword"}})],1),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveNewPassword()}}},[e._v("保存")])],1):e._e(),e.tertiary_nodule_state.changUnitNatures?s("div",{staticClass:"messStyle marginPass"},[s("div",[s("label",{attrs:{for:""}},[e._v("单位机构")]),s("el-select",{attrs:{placeholder:"单位性质"},model:{value:e.register_mess.industry,callback:function(t){e.$set(e.register_mess,"industry",t)},expression:"register_mess.industry"}},[s("el-option",{attrs:{label:"企业",value:"4"}}),s("el-option",{attrs:{label:"事业单位",value:"3"}}),s("el-option",{attrs:{label:"科研机构",value:"2"}}),s("el-option",{attrs:{label:"高等学校",value:"1"}}),s("el-option",{attrs:{label:"其他",value:"0"}})],1)],1),s("div",[s("label",{attrs:{for:""}},[e._v("专业领域")]),s("el-select",{attrs:{placeholder:"专业领域"},model:{value:e.register_mess.professionalField,callback:function(t){e.$set(e.register_mess,"professionalField",t)},expression:"register_mess.professionalField"}},[s("el-option",{attrs:{label:"工业技术",value:"8"}}),s("el-option",{attrs:{label:"农业科学",value:"7"}}),s("el-option",{attrs:{label:"医药卫生",value:"6"}}),s("el-option",{attrs:{label:"基础科学",value:"5"}}),s("el-option",{attrs:{label:"科教文艺",value:"4"}}),s("el-option",{attrs:{label:"经济财政",value:"3"}}),s("el-option",{attrs:{label:"社会科学",value:"2"}}),s("el-option",{attrs:{label:"哲学政法",value:"1"}}),s("el-option",{attrs:{label:"其他",value:"0"}})],1)],1),s("div",[s("label",{attrs:{for:""}},[e._v("职位")]),s("el-select",{attrs:{placeholder:"职位"},model:{value:e.register_mess.position,callback:function(t){e.$set(e.register_mess,"position",t)},expression:"register_mess.position"}},[s("el-option",{attrs:{label:"企业员工",value:"6"}}),s("el-option",{attrs:{label:"学生",value:"5"}}),s("el-option",{attrs:{label:"科研助理",value:"4"}}),s("el-option",{attrs:{label:"研究员",value:"3"}}),s("el-option",{attrs:{label:"课题组负责人",value:"2"}}),s("el-option",{attrs:{label:"学术带头人",value:"1"}}),s("el-option",{attrs:{label:"其他",value:"0"}})],1)],1),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveRegisterMess()}}},[e._v("保存")])],1):e._e()]):e._e()]),s("div",{staticClass:"personalSettings-cont-bottom"},[e._v(" Version "+e._s(e.version)+" ")])])])},i=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"setting-level-2-list"},[s("div",{staticClass:"level-2-list-left"},[s("a",{attrs:{href:"../../../#/userAgre",target:"_blank"}},[e._v("用户协议")])]),s("div",{staticClass:"level-2-list-right"},[e._v(">")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"setting-level-2-list"},[s("div",{staticClass:"level-2-list-left"},[s("a",{attrs:{href:"../../../#/privacyPolicy",target:"_blank"}},[e._v("隐私政策")])]),s("div",{staticClass:"level-2-list-right"},[e._v(">")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"setting-level-2-list"},[s("div",{staticClass:"level-2-list-left"},[s("a",{attrs:{href:"../../../#/aboutUs",target:"_blank"}},[e._v("关于我们")])]),s("div",{staticClass:"level-2-list-right"},[e._v(">")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticStyle:{margin:"-20px 0 20px 0"}},[s("p",[e._v("点击头像图片可进行更换")]),s("p",[e._v("支持图片格式：JPG、PNG")])])}],l=(s("d81d"),s("a434"),s("b0c0"),s("a9e3"),s("d3b7"),s("ac1f"),s("466d"),s("5319"),s("d4ec")),r=s("bee2"),n=s("262e"),o=s("2caf"),c=s("9ab4"),u=s("60a3"),v=s("0613"),d=s("b32d"),g=function(e){Object(n["a"])(s,e);var t=Object(o["a"])(s);function s(){var e;return Object(l["a"])(this,s),e=t.apply(this,arguments),e.version="1.0.1",e.levelState_1=!0,e.levelState_2=!1,e.levelState_3=!1,e.bread_crumbs=["个人设置"],e.bread_crumbs_html="<span ><span>",e.secondary_type="",e.match={instructions:"用户须知",admin:"账号管理",changName:"用户名修改",headImg:"用户头像",changPass:"修改密码",changUnitNatures:"单位性质"},e.tertiary_nodule_state={changName:!1,headImg:!1,changPass:!1,changUnitNatures:!1},e.changUserrMess={changName:v["a"].state.userMess.username,oldPassword:"",newPassword:"",newSecondPassword:""},e.imgObj={imgName:""},e.imgPath=v["a"].state.userMess.headImageMax,e.register_mess={industry:"",position:"",professionalField:""},e.saveState_2="",e.longBallPicturesState=!1,e.industryList=[{val:"企业",key:"4"},{val:"事业单位",key:"3"},{val:"科研机构",key:"2"},{val:"高等学校",key:"1"},{val:"其他",key:"0"}],e.professionalFieldList=[{val:"工业技术",key:"8"},{val:"农业科学",key:"7"},{val:"医药卫生",key:"6"},{val:"基础科学",key:"5"},{val:"科教文艺",key:"4"},{val:"经济财政",key:"3"},{val:"社会科学",key:"2"},{val:"哲学政法",key:"1"},{val:"其他",key:"0"}],e.positionList=[{val:"企业员工",key:"6"},{val:"学生",key:"5"},{val:"科研助理",key:"4"},{val:"研究员",key:"3"},{val:"课题组负责人",key:"2"},{val:"学术带头人",key:"1"},{val:"其他",key:"0"}],e}return Object(r["a"])(s,[{key:"created",value:function(){this.changUserrMess.changName=v["a"].state.userMess.username,this.imgPath=v["a"].state.userMess.headImageMax}},{key:"mounted",value:function(){var e=this;this.getUserMess().then((function(t){e.changUserrMess.changName=t.username,e.imgPath=t.headImageMax}))}},{key:"level1Click",value:function(){this.levelState_1=!1,this.levelState_2=!0}},{key:"level2Click",value:function(){this.levelState_1=!1,this.levelState_2=!1,this.levelState_3=!0}},{key:"levelThreeShows",value:function(e){for(var t in console.log("嗯哼"),this.tertiary_nodule_state)this.tertiary_nodule_state[t]=!1;this.tertiary_nodule_state[e]=!0}},{key:"instructions",value:function(e){console.log("我被点击了？"),console.log(e),this.saveState_2=e,this.level1Click(),this.secondary_type=e,this.breadCrumbs(e)}},{key:"lowerClick",value:function(e){console.log("我被点击了2？"),console.log(e),this.level2Click(),this.levelThreeShows(e),this.secondary_type=e,this.breadCrumbs(e)}},{key:"saveUserName",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={username:this.changUserrMess.changName};""==e&&this.isRepeatUserName();var s=this;this.$request.put("/main/h5/user/editUserInfo",t).then((function(t){"00000000"==t.code?((e="")&&s.$message(t.message),s.getUserMess(),window.history.go(0)):(e="")&&s.$message(t.message)}))}},{key:"isRepeatUserName",value:function(){var e=this;return new Promise((function(t){var s=e;e.$axios.get("/main/h5/sign/checkUsername?username="+e.changUserrMess.changName).then((function(e){console.log(e),"00000000"==e.data.code?e.data.data&&s.$message("该用户名已存在, 请重新输入"):console.log("用户名效验失败")}))}))}},{key:"saveNewPassword",value:function(){var e=this;if(this.oldPassword==this.newPassword)this.$message({message:"修改密码不能与旧密码一样",type:"warning"});else if(this.changUserrMess.newPassword==this.changUserrMess.newSecondPassword){var t=/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,18}$/;if(this.changUserrMess.oldPassword.replace().length<10||this.changUserrMess.newPassword.replace().length>20||!t.test(this.changUserrMess.newSecondPassword))this.$message({message:"密码格式错误：请输入10-20位英文和数字组合",type:"warning"});else{var s={beforePassword:this.changUserrMess.oldPassword,newPassword:this.changUserrMess.newSecondPassword};this.$request.put("/main/h5/user/editPassword",s).then((function(t){"00000000"==t.code?(console.log("------ 修改密码成功 -------"),e.$message("修改密码成功")):(console.log("------ 修改密码操作失败 -------"),e.$message.error(t.message))}))}}else this.$message({message:"两次密码输入不一致",type:"warning"})}},{key:"beforeAvatarUpload",value:function(e){console.log(e),this.imgObj.imgName=e.name}},{key:"handImgSuccess",value:function(e){"00000000"==e.code?(console.log("-------- 图片上传成功 ---------"),this.imgPath=e.data,this.longBallPicturesState=!0):console.log("-------- 图片上传操作失败 ---------")}},{key:"saveHeadImg",value:function(){var e=this;this.longBallPicturesState?this.$request.put("/main/h5/user/editHeadImg?imgUrl="+this.imgPath).then((function(t){"00000000"==t.code?(console.log("------ 修改头像成功 -------"),e.$message("跟换成功"),e.saveUserName("mess")):(console.log("------ 修改密码操作失败 -------"),e.$message.error(t.message))})):this.$message({message:"请先选择头像",type:"warning"})}},{key:"saveRegisterMess",value:function(){var e=this,t={industry:Number(this.register_mess.industry),professionalField:Number(this.register_mess.professionalField),position:Number(this.register_mess.position)},s=this;this.$request.put("/main/h5/user/editUserInfo",t).then((function(t){"00000000"==t.code?s.$message(t.message):e.$message.error(t.message)}))}},{key:"breadCrumbs",value:function(e){var t=this.match[e];this.bread_crumbs.push(t)}},{key:"indexShow",value:function(e){var t=e+1;if(1==t){this.levelState_1=!0,this.levelState_2=!1,this.levelState_3=!1;var s=!1;this.bread_crumbs=["个人设置"],this.bread_crumbs.map((function(t,a){a>e&&(s=!0)})),s&&this.bread_crumbs.splice(t,1)}else if(2==t){this.levelState_1=!1,this.levelState_2=!0,this.levelState_3=!1;var a=!1;this.secondary_type=this.saveState_2,console.log(this.secondary_type),this.bread_crumbs.map((function(t,s){s>e&&(a=!0)})),a&&this.bread_crumbs.splice(t,1)}console.log(this.bread_crumbs)}},{key:"getUserMess",value:function(){var e=this;return new Promise((function(t){var s=e;d["a"].get("/main/h5/user/findUserInfo").then((function(e){"00000000"==e.code?(localStorage.setItem("userMess",JSON.stringify(e.data)),v["a"].commit("saveUserMess",e.data),s.industryList.map((function(t){t.key==e.data.industry&&(s.register_mess.industry=t.val)})),s.professionalFieldList.map((function(t){t.key==e.data.professionalField&&(s.register_mess.professionalField=t.val)})),s.positionList.map((function(t){t.key==e.data.position&&(s.register_mess.position=t.val)})),t(e.data)):"900171"==e.code&&console.log("去登陆啦")}))}))}},{key:"clickLogOut",value:function(){localStorage.clear(),window.history.go(0)}}]),s}(u["c"]);g=Object(c["a"])([Object(u["a"])({components:{}})],g);var h=g,f=h,m=(s("8d42"),s("2877")),p=Object(m["a"])(f,a,i,!1,null,null,null);t["default"]=p.exports}}]);
